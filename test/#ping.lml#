


module Test: sig

end = struct

  let rec ping cin cout = 
    let cin = Fifo.read cin in
    let cout = Fifo.write cout "Ping" in
    ping cin cout

  let pong cin cout = 
    Fifo.read cin ;
    Fifo.write cout "Pong"

  let make() = 
    let r1, w1 = Fifo.make unit in
    let r2, w2 = Fifo.make unit in
    let w1 = write "Ping" w1 in
    ping r1 w2 ;
    pong r2 w1 ;
    
end
